# ğŸ—‚ï¸ íŒŒì¼ êµ¬ì¡°

```
ğŸ“¦ assignment_express_v
â”œâ”€Â .prettierrc.js
â”œâ”€Â README.md
â”œâ”€Â jest.config.js
â”œâ”€Â package-lock.json
â”œâ”€Â package.json
â”œâ”€Â src
â”‚Â Â â”œâ”€Â app.ts
â”‚Â Â â”œâ”€Â controllers
â”‚Â Â â”‚Â Â â””â”€Â timeslots.controller.ts
â”‚Â Â â”œâ”€Â data
â”‚Â Â â”‚Â Â â””â”€Â data.ts
â”‚Â Â â”œâ”€Â middlewares
â”‚Â Â â”‚Â Â â””â”€Â errorhandler.ts
â”‚Â Â â”œâ”€Â repositories
â”‚Â Â â”‚Â Â â”œâ”€Â events.repository.ts
â”‚Â Â â”‚Â Â â””â”€Â workhour.repository.ts
â”‚Â Â â”œâ”€Â routes
â”‚Â Â â”‚Â Â â”œâ”€Â index.ts
â”‚Â Â â”‚Â Â â””â”€Â timeslots.route.ts
â”‚Â Â â”œâ”€Â schemas
â”‚Â Â â”‚Â Â â””â”€Â getTimeSlotReqSchema.ts
â”‚Â Â â”œâ”€Â services
â”‚Â Â â”‚Â Â â””â”€Â timeslots.service.ts
â”‚Â Â â”œâ”€Â types
â”‚Â Â â”‚Â Â â””â”€Â getTimeSlot.type.ts
â”‚Â Â â””â”€Â utils
â”‚Â Â Â Â Â â”œâ”€Â generateTimeslots.ts
â”‚Â Â Â Â Â â”œâ”€Â isConflictPeriod.ts
â”‚Â Â Â Â Â â””â”€Â weekday.ts
â”œâ”€Â test
â”‚Â Â â””â”€Â unit
â”‚Â Â Â Â Â â”œâ”€Â services
â”‚Â Â Â Â Â â”‚Â Â â””â”€Â timeslots.service.spec.ts
â”‚Â Â Â Â Â â””â”€Â utils
â”‚Â Â Â Â Â Â Â Â â”œâ”€Â generateTimeslots.spec.ts
â”‚Â Â Â Â Â Â Â Â â”œâ”€Â isConflictPeriod.spec.ts
â”‚Â Â Â Â Â Â Â Â â””â”€Â weekday.spec.ts
â””â”€Â tsconfig.json
```
Â©generated by [Project Tree Generator](https://woochanleee.github.io/project-tree-generator)

---
# ğŸ§ ì£¼ìš” í•¨ìˆ˜ ì„¤ëª…


## `getDayTimeTable` [(ì†ŒìŠ¤ì½”ë“œ)](https://github.com/mseoa/assignment_express_v/blob/48a4913c0f1137963af8d37b0a964c7ad731f5c3/src/services/timeslots.service.ts#L14)
ì‹œì‘ì¼ë¶€í„° ì§€ì •ëœ ì¼ ìˆ˜ê¹Œì§€ì˜ ì¼ì •ì„ ìƒì„±í•©ë‹ˆë‹¤. ê° ì¼ì •ì—ëŠ” ì‹œê°„ëŒ€(time slot) ëª©ë¡ì´ í¬í•¨ë©ë‹ˆë‹¤.
```ts
src/services/timeslots.service.ts

getDayTimeTable(
  start_day_identifier: string,
  timezone_identifier: string,
  service_duration: number,
  days: number,
  timeslot_interval: number,
  is_ignore_schedule: boolean,
  is_ignore_workhour: boolean
): Promise<DayTimetable[]>

```
### ë§¤ê°œë³€ìˆ˜ 
* `start_day_identifier` (string): ì‹œì‘ì¼ì„ ë‚˜íƒ€ë‚´ëŠ” ë‚ ì§œ ì‹ë³„ìì…ë‹ˆë‹¤.
* `timezone_identifier` (string): ìš”ì²­í•˜ëŠ” íƒ€ì„ì¡´ì— ë”°ë¼ ë‚ ì§œì˜ êµ¬ë¶„ì´ ë³€ê²½ë©ë‹ˆë‹¤.
* `service_duration` (number): ì„œë¹„ìŠ¤ ì œê³µ ì‹œê°„ì„ ì´ˆ ë‹¨ìœ„ë¡œ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
* `days` (number): ì‹œì‘ì¼ì„ ê¸°ì¤€ìœ¼ë¡œ ë°˜í™˜í•  ì¼ ìˆ˜ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.
* `timeslot_interval` (number): ì‹œê°„ëŒ€(time slot) ê°„ê²©ì„ ë¶„ ë‹¨ìœ„ë¡œ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
* `is_ignore_schedule` (boolean): í•´ë‹¹ ê¸°ê°„ì— ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ë¬´ì‹œí• ì§€ ì—¬ë¶€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.
* `is_ignore_workhour` (boolean): í•´ë‹¹ ê¸°ê°„ì— ì‚¬ë¡±ì— ì„¤ì •ëœ ì˜ì—…ì‹œê°„ì„ ë¬´ì‹œí•˜ê³  í•˜ë£¨ ì „ì²´ë¥¼ ê¸°ê°„ìœ¼ë¡œ ì„¤ì •í• ì§€ ì—¬ë¶€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.

### ë°˜í™˜ê°’
* `Promise<DayTimetable[]>`: ì¼ì¼ ì¼ì • ëª©ë¡ì„ í¬í•¨í•˜ëŠ” Promiseì…ë‹ˆë‹¤.


---

## `generateTimeSlots` [(ì†ŒìŠ¤ì½”ë“œ)](https://github.com/mseoa/assignment_express_v/blob/48a4913c0f1137963af8d37b0a964c7ad731f5c3/src/utils/generateTimeslots.ts#L3)
ì£¼ì–´ì§„ ì‹œì‘ ì‹œê°„ë¶€í„° ì¢…ë£Œ ì‹œê°„ê¹Œì§€ ì§€ì •ëœ ê°„ê²©ê³¼ ì§€ì† ì‹œê°„ì„ ê¸°ë°˜ìœ¼ë¡œ ì‹œê°„ëŒ€(time slot) ëª©ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤.
```ts
src/utils/generateTimeSlots.ts

generateTimeSlots(
  start: Moment,
  finish: Moment,
  interval: number,
  duration: number
): { start: Moment; end: Moment }[]
```
### ë§¤ê°œë³€ìˆ˜ 
- `start` (Moment): time slotì˜ ì‹œì‘ ì‹œê°„ì…ë‹ˆë‹¤.
- `finish` (Moment): time slotì˜ ì¢…ë£Œ ì‹œê°„ì…ë‹ˆë‹¤.
- `interval` (number): ì‹œê°„ëŒ€(time slot) ê°„ê²©ì„ ì´ˆ ë‹¨ìœ„ë¡œ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
- `duration` (number): ì„œë¹„ìŠ¤ ì œê³µ ì‹œê°„ì„ ì´ˆ ë‹¨ìœ„ë¡œ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

### ë°˜í™˜ê°’
* `{ start: Moment; end: Moment }[]`: ì‹œê°„ëŒ€(time slot) ëª©ë¡ì„ í¬í•¨í•˜ëŠ” ë°°ì—´ì…ë‹ˆë‹¤.
---
## `isConflictPeriod` [(ì†ŒìŠ¤ì½”ë“œ)](https://github.com/mseoa/assignment_express_v/blob/48a4913c0f1137963af8d37b0a964c7ad731f5c3/src/utils/isConflictPeriod.ts#L3)
ì£¼ì–´ì§„ ì‹œê°„ëŒ€(time slot)ì™€ ì´ë²¤íŠ¸ì˜ ì‹œì‘ ë° ì¢…ë£Œ ì‹œê°„ì„ ë¹„êµí•˜ì—¬ ì¶©ëŒ ì—¬ë¶€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
```ts
src/utils/isConflictPeriod.ts

isConflictPeriod(
  timeslotStart: Moment,
  timeslotEnd: Moment,
  eventStart: Moment,
  eventEnd: Moment
): boolean
```
### ë§¤ê°œë³€ìˆ˜ 
- `timeslotStart` (Moment): ì‹œê°„ëŒ€(time slot)ì˜ ì‹œì‘ ì‹œê°„ì…ë‹ˆë‹¤.
- `timeslotEnd` (Moment): ì‹œê°„ëŒ€(time slot)ì˜ ì¢…ë£Œ ì‹œê°„ì…ë‹ˆë‹¤.
- `eventStart` (Moment): ì´ë²¤íŠ¸ì˜ ì‹œì‘ ì‹œê°„ì…ë‹ˆë‹¤.
- `eventEnd` (Moment): ì´ë²¤íŠ¸ì˜ ì¢…ë£Œ ì‹œê°„ì…ë‹ˆë‹¤.

### ë°˜í™˜ê°’
* `boolean`: ì¶©ëŒ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” boolean ê°’ì…ë‹ˆë‹¤. ì¶©ëŒì´ ìˆì„ ê²½ìš° trueë¥¼ ë°˜í™˜í•˜ê³ , ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ falseë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---
## `findEventsOnTheDay` [(ì†ŒìŠ¤ì½”ë“œ)](https://github.com/mseoa/assignment_express_v/blob/48a4913c0f1137963af8d37b0a964c7ad731f5c3/src/repositories/events.repository.ts#L4)
ì£¼ì–´ì§„ ì‹œì‘ ì‹œê°„ê³¼ ì¢…ë£Œ ì‹œê°„ ì‚¬ì´ì˜ í•´ë‹¹ ë‚ ì§œì— ìˆëŠ” ì´ë²¤íŠ¸ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.
```ts
src/repositories/events.repository.ts

findEventsOnTheDay(start: number, end: number): Promise<Event[]>
```
### ë§¤ê°œë³€ìˆ˜ 
- `start` (number): ê²€ìƒ‰í•  ê¸°ê°„ì˜ ì‹œì‘ ì‹œê°„(unix timestamp)ì…ë‹ˆë‹¤.
- `end` (number): ê²€ìƒ‰í•  ê¸°ê°„ì˜ ì¢…ë£Œ ì‹œê°„(unix timestamp)ì…ë‹ˆë‹¤.

### ë°˜í™˜ê°’
* `Promise<Event[]>`: í•´ë‹¹ ë‚ ì§œì— ìˆëŠ” ì´ë²¤íŠ¸ ê°ì²´ì˜ ë°°ì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

---
## `findWorkhoursByWeekday` [(ì†ŒìŠ¤ì½”ë“œ)](https://github.com/mseoa/assignment_express_v/blob/48a4913c0f1137963af8d37b0a964c7ad731f5c3/src/repositories/workhour.repository.ts#L4)
ì£¼ì–´ì§„ ìš”ì¼ì— í•´ë‹¹í•˜ëŠ” ê·¼ë¬´ ì‹œê°„ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.
```ts
src/repositories/workhour.repository.ts

findWorkhoursByWeekday(yoil: number): Promise<Workhour | undefined>
```
### ë§¤ê°œë³€ìˆ˜ 
- `yoil` (number): ê²€ìƒ‰í•  ìš”ì¼ì„ ë‚˜íƒ€ë‚´ëŠ” ê°’ì…ë‹ˆë‹¤.

### ë°˜í™˜ê°’
* `Promise<Workhour | undefined>`: ì£¼ì–´ì§„ ìš”ì¼ì— í•´ë‹¹í•˜ëŠ” ê·¼ë¬´ ì‹œê°„ ë°ì´í„°ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ë°ì´í„°ë¥¼ ì°¾ì§€ ëª»í•œ ê²½ìš° undefinedë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

# ğŸ§ ìœ ë‹› í…ŒìŠ¤íŠ¸
| Spec file | Case | ì…ë ¥ | ê¸°ëŒ€ ê²°ê³¼ | ì˜ˆìƒë˜ëŠ” ë™ì‘ |
|---|---|---|---|---|
| [timeslots.service.spec](https://github.com/mseoa/assignment_express_v/blob/48a4913c0f1137963af8d37b0a964c7ad731f5c3/test/unit/services/timeslots.service.spec.ts#L12) | ìš”ì²­í•œ ë‚ ì§œì— í•´ë‹¹í•˜ëŠ” responseë¡œ ë‚˜ì˜¨ë‹¤ | íŠ¹ì • ë‚ ì§œ | í•´ë‹¹ ë‚ ì§œì— ëŒ€í•œ timeslot ë°˜í™˜ | ì£¼ì–´ì§„ ë‚ ì§œì— í•´ë‹¹í•˜ëŠ” timeslotì„ ìƒì„±í•˜ì—¬ ë°˜í™˜ |
|  | ì¼ìë³„ íœ´ë¬´ ì„¤ì • ì‹œ íœ´ë¬´ì¼ì—ëŠ” ë¹ˆ timeslotì´ ë°˜í™˜ëœë‹¤ | íŠ¹ì • ë‚ ì§œ, íœ´ì¼ ì •ë³´ | í•´ë‹¹ ë‚ ì§œê°€ íœ´ì¼ì´ë¯€ë¡œ ë¹ˆ ì‹œê°„í‘œ ë°˜í™˜ | ì£¼ì–´ì§„ ë‚ ì§œê°€ íœ´ì¼ì¸ì§€ í™•ì¸í•˜ê³ , íœ´ì¼ì¸ ê²½ìš° ë¹ˆ timeslotì„ ë°˜í™˜ |
|  | Eventê°€ ìˆì„ ê²½ìš° ì˜ˆì•½ ê°€ëŠ¥í•œ ì‹œê°„ì—ì„œ ë¹ ì§„ë‹¤ | íŠ¹ì • ë‚ ì§œ, ì´ë²¤íŠ¸ ì •ë³´ | ì£¼ì–´ì§„ ì´ë²¤íŠ¸ì™€ ê²¹ì¹˜ëŠ” ì‹œê°„ì„ ì œì™¸í•˜ê³  timeslot ë°˜í™˜ | ì£¼ì–´ì§„ ë‚ ì§œì— í•´ë‹¹í•˜ëŠ” timeslotì„ ìƒì„±í•˜ê³ , ì¤‘ë³µëœ ì´ë²¤íŠ¸ê°€ ìˆëŠ” ê²½ìš° ì´ë¥¼ ì œì™¸í•œ ì‹œê°„í‘œë¥¼ ë°˜í™˜ |
|  | is_ignore_scheduleì¼ ê²½ìš° ì´ë²¤íŠ¸ ìˆëŠ” ë‚ ê³¼ ì—†ëŠ” ë‚ ì˜ timeslotê°¯ìˆ˜ê°€ ê°™ë‹¤ | is_ignore_schedule `true` | ì´ë²¤íŠ¸ê°€ ìˆëŠ” ë‚ ê³¼ ì—†ëŠ” ë‚ ì˜ timeslot ê°¯ìˆ˜ê°€ ë™ì¼ | ì´ë²¤íŠ¸ê°€ ìˆëŠ” ë‚ ê³¼ ì—†ëŠ” ë‚ ì˜ timeslot ê°¯ìˆ˜ê°€ ë™ì¼í•˜ê²Œ ë°˜í™˜ |
|  | is_ignore_workhourì¼ë•Œ íœ´ë¬´ì¼ê³¼ open_intervalì´ ê³ ë ¤ë˜ì§€ ì•ŠëŠ”ë‹¤ | is_ignore_workhour `true` | íœ´ë¬´ì¼ê³¼ ê·¼ë¬´ ì‹œê°„ì„ ë¬´ì‹œí•œ timeslot ë°˜í™˜ | ì£¼ì–´ì§„ ë‚ ì§œì— í•´ë‹¹í•˜ëŠ” timeslotì„ ìƒì„±í•  ë•Œ, íœ´ë¬´ì¼ê³¼ ê·¼ë¬´ ì‹œê°„ì„ ê³ ë ¤í•˜ì§€ ì•Šê³  ë°˜í™˜ |
| [generateTimeslots.service.spec](https://github.com/mseoa/assignment_express_v/blob/48a4913c0f1137963af8d37b0a964c7ad731f5c3/test/unit/utils/generateTimeslots.spec.ts#L4) | intervalê³¼ durationì„ ê³ ë ¤í•´ì„œ startë¶€í„° finish ì‚¬ì´ì˜ timeslotì„ ë§Œë“ ë‹¤ | start, finish, interval, duration | startì™€ finish ì‚¬ì´ì˜ ì‹œê°„ ë²”ìœ„ì—ì„œ intervalê³¼ durationì„ ê³ ë ¤í•˜ì—¬ timeslotì„ ìƒì„± | ì˜ˆìƒë˜ëŠ” Timeslot ê°¯ìˆ˜ì™€ ìƒì„±ëœ Timeslot ê°œìˆ˜ ì¼ì¹˜ |
| [isConflictPeriod.spec](https://github.com/mseoa/assignment_express_v/blob/48a4913c0f1137963af8d37b0a964c7ad731f5c3/test/unit/utils/isConflictPeriod.spec.ts#L4) | timeslotê³¼ eventê°€ ê²¹ì¹ ë•Œ trueë¥¼ ë°˜í™˜ | `08:00~09:00`, `08:30~09:30` | return true |  |
|  | timeslotê³¼ eventê°€ ê²¹ì¹˜ì§€ ì•Šì„ë•Œ falseë¥¼ ë°˜í™˜ | `08:00~09:00`, `09:30~10:00` | return false |  |
|  | ì´ë²¤íŠ¸ê°€ timeslotì„ í¬ê´„í•  ë•Œ trueë¥¼ ë°˜í™˜ | `08:00~09:00`, `07:30~09:30` | return true |  |
| [weekday.spec](https://github.com/mseoa/assignment_express_v/blob/48a4913c0f1137963af8d37b0a964c7ad731f5c3/test/unit/utils/weekday.spec.ts) | ì£¼ì–´ì§„ weekdayê°’ì— ìƒì‘í•˜ëŠ” keyë¥¼ ë°˜í™˜ | 1 | sun |  |
|  | invalid weekdayì¼ë•Œ errorë¥¼ ë°œìƒ | 8 | throw Error |  |